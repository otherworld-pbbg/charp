<?php
include_once('header2.php');
if (isset($_GET['msg'])) interpretMsg($_GET['msg']);

ptag('h1', 'Player Index');
$lcount = $player->countLogins();
if ($lcount==1) {
	para("Hi there! Since you're new, I thought I'd welcome you to the game. This is still in development, so there might not be much to see, but I hope you'll come back when it's finished.");
}
else para("You have logged in " . $lcount . " times so far.");
$charlist = $player->getCharacters();
if (!$charlist) {
	para("You don't have any characters at the moment. Would you like to create one?");
}
else {
	?>
	<script>
	$(document).ready(function(){
		$('[data-toggle="popover"]').popover(); 
	});
	</script>
	<?php
	ptag('h2', 'List of characters');
	starttag('ul');
	foreach($charlist as $c) {
		$cmemo = $player->getMemo($c->getId());
		starttag('li');
		ptag('a', $c->getName(), array(
			'href' => 'index.php?page=cIndex&charid=' . $c->getId(),
			'class' => 'minwide'
			));
		if ($cmemo) {
		ptag('button', 'memo', array(
			'type' => 'button',
			'class' => 'btn btn-secondary btn-sm',
			'title' => 'memo',
			'data-container' => 'body',
			'data-toggle' => 'popover',
			'data-placement' => 'bottom',
			'data-content' => $cmemo['contents'],
			'data-original-title' => 'memo'
			));
		}
		closetag('li');
	}
	closetag('ul');
}
?>